

[#Menu: Gateway of Tally]
	
;	Add: Item: Tally Payment Detail	: Display: TPO_Payment_Report
[Report	: TPO_Payment_Report]
	
	Form	: TPO_Payment_Form

	Set		: SVFromDate	: $$Date:$StartingFrom:Company:$$CurrentCompany
	Set		: SVToDate	: $$Date:$LASTVOUCHERDATE:Company:$$CurrentCompany
	
[Form: TPO_Payment_Form]
	
	Part: TPO_Payment_ColDetail
	
	Height	: 100 % Page
	Width	: 100 % Page
	
[Part: TPO_Payment_ColDetail]
	
	Line	: TPO_Payment_ColDetail
	Repeat	: TPO_Payment_ColDetail	: TPO_Payment_LedgerEntries_Collection_Src
	Scroll	: Vertical	
	
[Collection: TPO_Payment_Collection_Src]
	
	Parm Var	: SVFromDate	: Date: $StartingFrom:Company:$$CurrentCompany
	Parm Var	: SVToDate		: Date: $LASTVOUCHERDATE:Company:$$CurrentCompany
	
	Type		: Vouchers: VoucherType
	Child Of	: $$VchTypePayment
	Belongs To	: Yes
	Fetch		: ?, 
	Fetch		: ledgerEntries.*, BankAllocations.*
	Filter		: GetFiltertheReport
	
[Collection: TPO_Payment_LedgerEntries_Collection_Src]
	
	Source Collection	: TPO_Payment_Collection_Src
	Walk				: LedgerEntries
	Fetch		: ?,Guid,VoucherTypeName, PartyLedgerName, VoucherNumber, Date, IsOptional, IsCancelled, isDeleted, IsPostDated
	Fetch		: MasterID, AlterID
	Fetch				: BillAllocations.*
 
[System	: Formulae]
	
	Asdasd		: $GUID = "abd19e88-f164-48f6-b6ec-40cd82a2fadf-000002d8"
	
[Line: TPO_Payment_ColDetail]
	
	Field: TPO_Payment_subscription_id, TPO_Payment_company_id,	TPO_Payment_guid,TPO_Payment_master_id,TPO_Payment_alter_id, TPO_Payment_voucher_type, TPO_Payment_voucher_type_alias
	Field: TPO_Payment_date	, TPO_Payment_voucher_number, TPO_Payment_ledger_id
	Field: TPO_Payment_is_optional, TPO_Payment_is_deleted, TPO_Payment_is_post_dated, TPO_Payment_is_cancelled
	Field: TPO_Payment_amount, TPO_Payment_is_deemed_positive
	
	JSONTag	:"Payment"

	Local	: Field: Default	: Type	: String
	Local	: Field: Default	: Border	: THick Left
	
	
	 Explode	: TPO_Payment_Bill_Allocations: Yes
	
[Part: TPO_Payment_Bill_Allocations]
	
	Line	: TPO_Payment_Bill_Allocations
	Repeat	: TPO_Payment_Bill_Allocations		:   BillAllocations
	Scroll	: Vertical
 
[Line: TPO_Payment_Bill_Allocations]
		
	Field: TPO_Payment_bill_type,TPO_Payment_bill_date
	Field: TPO_Payment_bill_name, TPO_Payment_bill_due_date, TPO_Payment_bill_amount, TPO_Payment_bill_dr_or_cr

	JSONTag		: "bill_allocation"
	
[Field: TPO_Payment_bill_type]
	
	
	Set as	: $BillType
	JSONTag	: "bill_type"
	
[Field: TPO_Payment_bill_date]
	
	Set as	: if $$IsEmpty:$BillDate then $$TPO_DateMMYYYYFormat:$$Date:$BillDate else $$TPO_DateMMYYYYFormat:$$Date:$BillDate
	JSONTag	: "bill_date"
	
[Field:  TPO_Payment_bill_name]
	
	Set as	: if $$IsEmpty:$Name then "NA" else $Name
	JSONTag	: "bill_name"
	
[Field: TPO_Payment_bill_due_date]

	Type	: Due Date
	Set as	: if $$IsEmpty:$BillCreditPeriod then $$TPO_DateMMYYYYFormat:$$Date:$BillDate else $$TPO_DateMMYYYYFormat:$$Date:$BillCreditPeriod
	JSONTag	: "bill_due_date"
	
[Field: TPO_Payment_bill_amount]
		
	Set as	: $$TPO_RemoveCharactersFromString:$amount:","
	JSONTag	: "bill_amount"
	
[Field: TPO_Payment_bill_dr_or_cr]
		
	Set as	: if $$IsDr:$amount = "Yes" then "Yes" else "No"
	JSONTag	: "is_deemed_positive"
 
[Field: TPO_Payment_subscription_id]
	
	Set as	: @@TPO_CMPSubscriptionDetail
	JSONTag	: "subscription_id"
[Field: TPO_Payment_company_id]
	
	Set as	: @@IsTrackPayout_CMPID
	JSONTag	: "company_id"
	
[Field: TPO_Payment_master_id]

	Set as	: $MasterID
	JSONTag	: "master_id"
	
[Field: TPO_Payment_alter_id]
	
	Set as	: $AlterID
	JSONTag	: "alter_id"
	
[Field: TPO_Payment_guid]

	Set as	: $Guid
	JSONTag	: "guid"
[Field: TPO_Payment_voucher_type]
	
	Set as	: $voucherTypeName
	JSONTag	: "voucher_type"
[Field: TPO_Payment_voucher_type_alias]
	
	Set as	: "Payment"
	JSONTag	: "voucher_type_alias"
[Field: TPO_Payment_date]
	
	Set as	: $$TPO_DateMMYYYYFormat:$$Date:$Date
	JSONTag	: "date"
[Field: TPO_Payment_voucher_number]
	
	Set as	: $VoucherNUmber
	JSONTag	: "voucher_number"
[Field: TPO_Payment_ledger_id]
	
	Set as	:  $guid:ledger:$LedgerName
	JSONTag: "ledger_id"
[Field: TPO_Payment_is_optional]
	
	Set as	: $IsOptional
	JSONTag	: "is_optional"
	
[Field: TPO_Payment_is_deleted]
		
	Set as	: $IsDeleted
	JSONTag	: "is_deleted"
[Field: TPO_Payment_is_post_dated]
		
	Set as	: $IsPostDated
	JSONTag	: "is_post_dated"
	
[Field: TPO_Payment_is_cancelled]
	
	Set as	: $IsCancelled
	JSONTag	: "is_cancelled"
[Field: TPO_Payment_amount]
	
	Set as	: $$TPO_RemoveCharactersFromString:$Amount:","
	JSONTag	: "amount"
	
[Field: TPO_Payment_is_deemed_positive]

	Set as	: if $$IsDr:$Amount = "Yes" then "Yes" else "No"
	JSONTag	: "is_deemed_positive"
	


;
;[collection: collectionbill]
;	
;	type	: vouchers: vouchertype
;	child of	: $$VchTypeJournal
;	belongs to	: yes
;	
;	
;[collection: collectionbillsrc]
;	
;	source collection: collectionbill
;	walk	: ledgerentries 
;	
;	Format	: $$Line
;;	compute		: xbilldate	: $billdate
;;	compute		: xbilltype	: $billtype
;;	compute		: xname	: $name
;;	compute		: xamount	: $amount
;;	
;;	format	: $xbilldate
;;	format	: $xbilltype
;;	format	: $xname
;;	format	: $xamount
;	
;[#field: vchref]
;	
;	add: set as	: $$numitems:collectionbillsrc
	
	

	
	
	